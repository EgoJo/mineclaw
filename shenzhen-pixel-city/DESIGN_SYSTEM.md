# 深圳像素城市 · 完整UI设计规范

## 一、视觉风格定义

### 核心风格：俯视角像素城市（Top-Down Pixel City）

| 属性 | 规范 |
|------|------|
| 视角 | 正俯视（top-down），约80°俯角，轻微等距感 |
| 像素密度 | 背景图约1440×810px，人物约16-24px高 |
| 轮廓线 | 所有元素必须有1px黑色轮廓线（#1a1a2e） |
| 色彩风格 | 扁平像素色，有限色板（每个元素不超过8色） |
| 阴影 | 简单2px偏移阴影，颜色为元素色的深色版本 |
| 抗锯齿 | 禁止，所有边缘必须是硬像素边缘 |

### 场景色调规范

| 场景 | 主色调 | 氛围 |
|------|--------|------|
| 宝安城中村 | 棕褐色 #8B6F5E，泥土感 | 破旧、烟火气 |
| 南山科技园 | 冷蓝灰 #B8C8D8，玻璃感 | 现代、整洁 |
| 华强北 | 深紫 #2D1B4E，霓虹感 | 繁华、夜晚 |
| 深圳湾公园 | 青绿 #4A8C6F，自然感 | 开阔、清新 |
| 东门老街 | 暖红 #8B3A2A，历史感 | 传统、热闹 |
| 南山公寓 | 暖灰 #7A7A8A，生活感 | 平静、日常 |
| 福田CBD | 银灰 #9AA8B8，商务感 | 高端、冷峻 |

---

## 二、精灵图规范

### 人物精灵（Character Sprites）

```
画布尺寸：32×32px（每帧）
人物高度：约20px（含帽子/发型）
人物宽度：约12px
视角：正俯视，人物面朝下方（南向）为默认朝向
动画帧数：4帧（静止1帧 + 行走3帧）
朝向：4方向（南/北/东/西），共16帧
精灵表布局：横向16帧 × 纵向N个角色
```

**人物设计要素**：
- 头部：圆形，约8×8px，有发型/帽子特征
- 身体：约8×10px，有服装颜色区分
- 腿部：约4×6px，行走时左右交替
- 必须有1px黑色轮廓
- 每个角色有独特的颜色主题（便于快速识别）

### 车辆精灵（Vehicle Sprites）

```
单车/摩托：24×16px（横向行驶时）
小轿车：32×20px
出租车：32×20px（黄色车身）
公交车：48×24px
船只：40×24px
视角：正俯视，车头朝右为默认朝向
动画帧数：2帧（轮子转动）
朝向：2方向（左/右），共4帧
```

### 精灵表文件规划

| 文件 | 内容 | 尺寸 |
|------|------|------|
| `chars_v2.png` | 10个角色 × 16帧 | 512×320px |
| `vehicles_v2.png` | 6种车辆 × 4帧 | 256×128px |
| `fx_v2.png` | 特效（气泡/光晕/粒子） | 128×128px |

---

## 三、地图系统规范

### 场景地图结构

```
场景总尺寸：2880×1620px（背景图的2倍）
可视窗口：720×480px（约背景图的50%）
滚动方式：拖拽平移，边缘自动滚动
背景图：静态JPG，tile平铺或边缘延伸
```

### 道路区域定义（每个场景单独配置）

每个场景需要定义：
1. **行人区域**（walkable zones）：人物可行走的区域多边形
2. **道路区域**（road zones）：车辆行驶的区域
3. **禁止区域**（blocked zones）：建筑物、水域等不可通行区域

### 扩展性设计

```typescript
// 场景配置接口（支持未来扩展）
interface SceneConfig {
  id: string;
  name: string;
  backgroundUrl: string;
  mapSize: { w: number; h: number };
  walkableZones: Polygon[];   // 人物行走区域
  roadZones: Polygon[];       // 车辆行驶区域
  spawnPoints: Point[];       // Bot出生点
  landmarks: Landmark[];      // 地标（可点击）
  ambientVehicles: VehicleConfig[]; // 环境车辆配置
}
```

---

## 四、角色卡片UI规范

### Bot状态卡片

```
卡片尺寸：120×160px
头像区域：48×48px，使用精灵图第一帧
背景：半透明深色 rgba(10,10,30,0.85)
边框：1px solid，颜色与角色主题色一致
字体：像素风等宽字体（Courier/monospace）
```

### 名字标签（地图上）

```
背景：rgba(0,0,0,0.7)，圆角2px
字体：10px，白色，无抗锯齿
位置：角色头顶上方4px
```

---

## 五、扩展城市规划

### 第一期（当前）：深圳核心7区
- 宝安城中村、南山科技园、华强北、深圳湾公园、东门老街、南山公寓、福田CBD

### 第二期（扩展）：大湾区
- 罗湖口岸、前海自贸区、光明科学城、龙华工厂区

### 第三期（未来）：全国城市
- 北京中关村、上海陆家嘴、广州珠江新城

### 扩展原则
1. 每个新场景必须遵循本设计规范
2. 背景图统一使用1440×810px，相同像素密度
3. 新角色类型必须添加到chars_v2.png精灵表
4. 道路区域必须精确配置，不允许车辆在非道路区域行驶

---

## 六、技术实现规范

### Canvas渲染层次（从下到上）

1. **背景层**：静态背景图（drawImage）
2. **阴影层**：角色/车辆的地面阴影（半透明椭圆）
3. **车辆层**：按Y坐标排序，实现遮挡关系
4. **角色层**：Bot人物，按Y坐标排序
5. **UI层**：名字标签、情绪气泡、选中高亮

### 性能规范
- 最大同屏精灵数：50个（含车辆和人物）
- 动画帧率：12fps（像素风格，不需要60fps）
- 精灵图必须预加载，不允许运行时加载
- 使用requestAnimationFrame，不使用setInterval
