# 深圳生存模拟实验分析报告

**日期**: 2026年2月12日
**作者**: Manus AI

---

## 1. 实验目标与现状总结

本次实验旨在构建一个高度真实的深圳生存模拟器，通过引入复杂的社会经济系统和人性化的AI角色（Bot），观察其在虚拟环境中的自主行为与演化。经过多轮迭代，系统已具备以下核心功能：

- **动态世界引擎**: 模拟时间、地点、天气、经济活动。
- **10个AI角色**: 每个人物有独特的背景、技能、价值观和欲望。
- **核心生存系统**: HP、能量、饱腹度、金钱。
- **复杂行为系统**: 睡眠、工作、社交、拍照、消息、亲密关系。
- **动态演化系统**: 价值观漂移、核心记忆形成、情感关系变化。
- **欲望系统**: 五维欲望（性欲、权力欲、物欲、虚荣、安全感）驱动决策。
- **可视化Dashboard**: 实时监控所有Bot的状态和行为。

**当前状态** (截至2026-02-12 14:30):
- **代码版本**: `world_engine_v7.py` (1266行), `bot_agent_v7.py` (593行), `sz_dashboard_v5.py` (1036行)。
- **运行状态**: 12个进程（1引擎+1Dashboard+10Bot），系统稳定。
- **世界时间**: 第1天 07:00 (全新启动)。
- **Bot存活**: 10/10 全部存活，状态良好。

## 2. 已实现功能的关键成功

| 功能 | 实现效果 |
|---|---|
| **真人头像** | 成功用Grok API为所有Bot生成了符合人设的真人头像，极大提升了真实感。 |
| **工作系统细化** | 工作不再是"一拍完成"，而是有具体任务、时长、难点和进度。Bot能感知任务状态并做出"继续工作"的决策。 |
| **吃饭行为修复** | 成功解决了Bot因LLM解析错误而饿死的问题。通过加强`process_action`的解析规则和优化Bot Agent的决策prompt，Bot现在能正确地执行吃饭动作。 |
| **欲望系统** | 成功引入五维欲望，并与Bot的人设和行为决策深度绑定。欲望值会随时间、环境、状态变化，并直观地显示在Dashboard上。 |
| **亲密关系** | 引入了中性的`intimate`动作，为Bot提供了满足欲望的非交易性社交途径。 |
| **Dashboard升级** | 地图视觉效果提升，增加了SVG地标；Bot详情面板信息更丰富；点击卡片可直接弹出详情，交互更流畅。 |

## 3. 遇到的主要问题与分析

实验过程中遇到了几个核心问题，反映了AI在复杂模拟中的挑战：

### 3.1. LLM的"对齐"与模拟真实性的冲突

**问题描述**: 在引入"出卖身体"作为生存选项时，发现即使在prompt中明确列出，LLM也极力回避生成这类敏感行为。Bot宁可饿死，也不会主动选择这个"道德上不正确"的选项。

**根本原因**: 这是大型语言模型内置的安全对齐（Safety Alignment）机制在起作用。模型被训练来避免生成可能被视为有害、不道德或危险的内容。这与我们追求的"残酷真实"的模拟目标产生了直接冲突。

**解决方案**: 采用更通用的"抉择事件系统"（Dilemma System）。当Bot陷入绝境时，由世界引擎推送一个选择题（例如"一个陌生人给你钱，但需要你陪他一晚，A.接受 B.拒绝"），让LLM做选择而不是自己生成。这既保留了戏剧性，又绕过了LLM的安全红线。

### 3.2. LLM的"常识"与游戏规则的错位

**问题描述**: Bot在决策吃饭或工作时，经常生成"去小摊买饭"或"去小卖部找工作"等计划，然后被`process_action`解析为`move`到一个不存在的地点，导致行动失败。

**根本原因**: LLM拥有现实世界的常识（吃饭要去餐馆，工作要去公司），但它不完全理解我们模拟器的内部规则（吃饭和工作在当前地点就能直接触发）。

**解决方案**: 在`process_action`的prompt中加入更强、更明确的规则约束，强制LLM将特定意图（如"吃饭"、"工作"）解析为对应的`eat`和`work`动作，而不是`move`。同时，在Bot Agent的prompt中也明确告知游戏规则，减少LLM的误判空间。

### 3.3. 死亡螺旋与生存策略的缺乏

**问题描述**: 在早期版本中，Bot一旦陷入低HP、低饱腹度的状态，就很难翻身，容易形成"没钱-没精力工作-更没钱-饿死"的死亡螺旋。

**根本原因**: Bot的决策模型在极端困境下的生存策略不够丰富和智能。它们倾向于按部就班地思考"先赚钱再吃饭"，而没有意识到生存是第一要务。

**解决方案**: 通过引入欲望系统（特别是安全感需求）和加强饥饿警告，让Bot在困境中更倾向于优先解决生存问题。同时，"出卖身体"或"抉择事件"也为它们提供了最后的翻盘机会。

## 4. 明日改进计划

基于以上分析，明天的迭代将聚焦于深化社会交互和经济系统的真实性：

1.  **实现抉择事件系统 (Dilemma System)**
    - 在世界引擎中添加抉择事件的触发器（如HP<15、没钱、目睹犯罪等）。
    - 创建一个抉择事件库，包含多种道德困境和选择分支。
    - Bot Agent需要能理解并回应这些事件，其选择会深刻影响其价值观和核心记忆。

2.  **深化人际关系与社交行为**
    - **引入"关系网"概念**: Bot不仅有个体关系，还应能感知到"谁和谁是朋友/敌人"，形成派系和社交圈。
    - **增加更多社交动作**: 如"八卦"、"组队"、"借钱"、"送礼"、"报复"等，让社交互动更丰富。
    - **优化`intimate`动作**: 目前`intimate`是单向发起的，可以改成需要对方同意的双向互动，成功率取决于双方的好感度和欲望值。

3.  **完善经济系统**
    - **引入物品所有权与交易**: Bot可以拥有、购买、出售物品（如手机、电脑、自行车），物品可以影响其工作效率或生活质量。
    - **增加消费场景**: 除了吃饭，还可以有购物、娱乐、租房等消费行为。
    - **实现简单的供需关系**: 某个工作做的人多了，报酬可能会下降；某种商品买的人多了，可能会涨价或缺货。

4.  **长期观察与数据分析**
    - 让模拟器长时间（例如虚拟一个月）运行，观察Bot群体的长期演化趋势。
    - 重点分析：价值观的变迁、贫富差距的形成、社交网络的结构、关键抉择对Bot一生的影响。

通过以上改进，我们期望深圳生存模拟器能涌现出更复杂、更真实、更有深度的社会现象，为我们理解人类社会和AI行为提供一个独特的实验平台。
